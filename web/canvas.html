<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Einstein - 生成结果</title>
    <link rel="icon" href="/logo.jpg" type="image/jpeg" />
    <link rel="stylesheet" href="/styles.css?v=20260226a" />
  </head>
  <body data-page="canvas">
    <nav class="navbar">
      <div class="navbar-inner">
        <div class="navbar-left">
          <a href="/" class="nav-back" title="返回首页">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none"><path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </a>
          <a href="/" class="nav-brand"><img src="/logo.jpg" alt="Einstein" class="nav-logo" />Einstein Labs <span class="beta-tag">Beta</span></a>
        </div>
        <div class="navbar-right">
          <span class="status-chip" id="statusChip">
            <span class="status-dot"></span>
            <span id="statusText">等待中</span>
          </span>
          <span class="job-pill" id="jobId"></span>
          <button class="btn-ghost" id="logToggle">日志</button>
          <button class="btn-ghost btn-danger" id="cancelBtn" style="display:none">取消</button>
        </div>
      </div>
    </nav>

    <main class="result-container">
      <!-- 进度区域 -->
      <section class="progress-section" id="progressSection">
        <div class="progress-bar-wrap">
          <div class="progress-bar-fill" id="progressFill"></div>
        </div>
        <div class="progress-steps" id="progressSteps">
          <div class="step-item active" data-step="0"><span class="step-num">1</span><span class="step-label">生成图片</span></div>
          <div class="step-item" data-step="1"><span class="step-num">2</span><span class="step-label">SAM 分割</span></div>
          <div class="step-item" data-step="2"><span class="step-num">3</span><span class="step-label">提取图标</span></div>
          <div class="step-item" data-step="3"><span class="step-num">4</span><span class="step-label">生成模板</span></div>
          <div class="step-item" data-step="4"><span class="step-num">5</span><span class="step-label">最终合成</span></div>
        </div>
        <div class="progress-status" id="progressStatus">正在生成图片...</div>
      </section>

      <!-- 结果卡片：生成图片 -->
      <section class="result-card" id="figureCard" style="display:none">
        <div class="result-card-header">
          <h2 class="result-card-title">生成图片</h2>
          <a class="btn-download" id="figureDlBtn" download>
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8 2v8m0 0l-3-3m3 3l3-3M3 12h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            下载 PNG
          </a>
        </div>
        <div class="result-image-wrap">
          <img id="figureImg" class="result-image" alt="生成的科研图" />
        </div>
      </section>

      <!-- 结果卡片：SVG 矢量图 -->
      <section class="result-card" id="svgCard" style="display:none">
        <div class="result-card-header">
          <h2 class="result-card-title">SVG 矢量图</h2>
          <button class="btn-download" id="downloadAllSvg">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M8 2v8m0 0l-3-3m3 3l3-3M3 12h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
            全部下载
          </button>
        </div>
        <div class="svg-list" id="svgList"></div>
        <div class="svg-tip">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.2"/><path d="M8 7v4M8 5.5v0" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
          <span>SVG 文件可使用 <strong>Figma</strong>、<strong>Inkscape</strong>、<strong>Adobe Illustrator</strong> 或 AI 工具进一步编辑</span>
        </div>
      </section>

      <!-- 错误信息 -->
      <section class="result-card result-error-card" id="errorCard" style="display:none">
        <h2 class="result-card-title" style="color:#dc3545">生成失败</h2>
        <p id="errorDetail" class="error-detail"></p>
      </section>

      <!-- 底部操作 -->
      <section class="result-footer" id="resultFooter" style="display:none">
        <a href="/" class="btn-primary btn-lg">重新生成</a>
        <p class="footer-hint">对结果不满意？试试调整方法描述或添加参考图片</p>
      </section>
    </main>

    <!-- 日志面板 -->
    <aside class="log-panel" id="logPanel">
      <div class="panel-header">
        <span>日志</span>
        <button class="panel-close" id="logClose">&times;</button>
      </div>
      <div class="log-body" id="logBody"></div>
    </aside>

    <script src="/app.js?v=20260226a"></script>
  </body>
</html>
